<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>每日一题-Best_Time_to_Buy_and_Sell_Stock_with_Cooldown | Zhangxi-Lam的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="[每日一题] (Best Time to Buy and Sell Stock with Cooldown)Say you have an array for which the ith element is the price of a given stock on day i.Design an algorithm to find the maximum profit. You may com">
<meta property="og:type" content="article">
<meta property="og:title" content="每日一题-Best_Time_to_Buy_and_Sell_Stock_with_Cooldown">
<meta property="og:url" content="http://zhangxi-lam.github.io/2015/11/28/6_每日一题-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown/index.html">
<meta property="og:site_name" content="Zhangxi-Lam的博客">
<meta property="og:description" content="[每日一题] (Best Time to Buy and Sell Stock with Cooldown)Say you have an array for which the ith element is the price of a given stock on day i.Design an algorithm to find the maximum profit. You may com">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="每日一题-Best_Time_to_Buy_and_Sell_Stock_with_Cooldown">
<meta name="twitter:description" content="[每日一题] (Best Time to Buy and Sell Stock with Cooldown)Say you have an array for which the ith element is the price of a given stock on day i.Design an algorithm to find the maximum profit. You may com">
  
    <link rel="alternative" href="/atom.xml" title="Zhangxi-Lam的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <div class="wrapper">
      <header id="header">
  <div id="banner"></div>

  <div id="header-wrapper">
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:http://zhangxi-lam.github.io"></form>
      </div>
    </div>
  </div>
  <div id="header-outer" class="outer">
    <div id="avatar"></div>
    <div id="header-name" class="inner">
      <h1 id="logo">
        Zhangxi Lin's Blog
      <h1>
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo" class="btn home">
          <span class="icon"></span>
          Home
        </a>
      </h1>
      
    </div>
    <div id="header-bottom">
      <a href="https://github.com/Zhangxi-Lam" class="btn primary follow">
        <span class="icon"></span>
        Follow
      </a>
      <a href="mailto:zl1422@nyu.edu" class="btn email">
        <span class="icon"></span>
        Email
      </a>
    </div>
  </div>
</header>

        <div class="outer">
          <section id="main"><article id="post-6_每日一题-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/28/6_每日一题-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown/" class="article-date">
  <time datetime="2015-11-28T05:22:27.000Z" itemprop="datePublished">2015-11-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      每日一题-Best_Time_to_Buy_and_Sell_Stock_with_Cooldown
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p></p><p>[每日一题] (Best Time to Buy and Sell Stock with Cooldown)<br><strong>Say you have an array for which the ith element is the price of a given stock on day i.<br>Design an algorithm to find the maximum profit. You may complete as many transactions as you like (ie, buy one and sell one share of the stock multiple times) with the following restrictions:<br>You may not engage in multiple transactions at the same time (ie, you must sell the stock before you buy again).<br>After you sell your stock, you cannot buy stock on next day. (ie, cooldown 1 day)</strong></p>
<p></p><h4>解题思路</h4><br>本题使用动态规划，解题思路类似于抢劫问题。使用3个变量free, cool, have来存储当前位置的最优解。<br>free用来存储到当前位置，状态为空闲时的最优解<br>have用来存储到当前位置，状态为持有股票时的最优解<br>cool用来存储到当前位置，状态为正在冷却时的最优解<p></p>
<p>状态转移矩阵为：<br>free = max(free, cool) # 当前free的最优解由上一时间free的最优解和cool的最优解得出<br>have = max(have, free-p) # 当前have的最优解由上一时间持有股票时的最优解和上一时间空闲而这一时间购买股票的最优解得出<br>cool = have + p #当前cool的最优解由上一时间持有股票的最优解再在这一时间卖出得出</p>
<p><em>Python:</em><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env </span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span><br><span class="line">时间复杂度 O(n)</span><br><span class="line">"""</span></span><br><span class="line">prices = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">2</span>]</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span><span class="params">(self, prices)</span>:</span></span><br><span class="line">    <span class="string">"""</span><br><span class="line">    :type prices: List[int]</span><br><span class="line">    :rtype: int</span><br><span class="line">    """</span></span><br><span class="line">    free = <span class="number">0</span></span><br><span class="line">    have = cool = float(<span class="string">'-inf'</span>)</span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> prices:</span><br><span class="line">        free, have, cool = max(free, cool), max(have, free-p), have+p</span><br><span class="line">    <span class="keyword">return</span> max(free, cool)</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zhangxi-lam.github.io/2015/11/28/6_每日一题-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown/" data-id="cihp3ai05000e9s9ts645jesg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Leetcode/">Leetcode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/每日一题/">每日一题</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/11/28/线段树-SegmentationTree/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          线段树-SegmentationTree
        
      </div>
    </a>
  
  
    <a href="/2015/11/23/5_每日一题-A-B/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">每日一题-A+B-</div>
    </a>
  
</nav>

  
</article>

</section>
          
            <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a><span class="category-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Structure/">Data Structure</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google/">Google</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Leetcode/">Leetcode</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lintcode/">Lintcode</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/乱七八糟/">乱七八糟</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/每日一刷/">每日一刷</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/每日一题/">每日一题</a><span class="tag-list-count">6</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Data-Structure/" style="font-size: 10px;">Data Structure</a><a href="/tags/Google/" style="font-size: 12.5px;">Google</a><a href="/tags/Leetcode/" style="font-size: 17.5px;">Leetcode</a><a href="/tags/Lintcode/" style="font-size: 10px;">Lintcode</a><a href="/tags/乱七八糟/" style="font-size: 10px;">乱七八糟</a><a href="/tags/每日一刷/" style="font-size: 15px;">每日一刷</a><a href="/tags/每日一题/" style="font-size: 20px;">每日一题</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">9</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/12/02/3_每日一刷-Range-Sum-Query-Mutable/">3_每日一刷-Range_Sum_Query_Mutable</a>
          </li>
        
          <li>
            <a href="/2015/12/01/2_每日一刷-Minimum_Height_Trees/">每日一刷-Minimum_Height_Trees</a>
          </li>
        
          <li>
            <a href="/2015/11/30/1_每日一刷-Burst-Balloon/">每日一刷-Burst_Balloon</a>
          </li>
        
          <li>
            <a href="/2015/11/28/线段树-SegmentationTree/">线段树-SegmentationTree</a>
          </li>
        
          <li>
            <a href="/2015/11/28/6_每日一题-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown/">每日一题-Best_Time_to_Buy_and_Sell_Stock_with_Cooldown</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
          
        </div>
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Zhangxi-Lam<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>
